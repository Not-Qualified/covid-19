{% extends "base.html" %}
{% load mathfilters %}
{% load indian_numbers_tags %}

{% block content %}
<style type="text/css">
table tbody tr td a {
  text-decoration: underline;
}
</style>

{% include "home/cards.html" %}

<div class="table-responsive">
	<table id="example" class="display table table-striped table-bordered table-hover" style="width:100%">
	        <thead class="thead-dark">
	            <tr>
	                <th>State Name</th>
	                <th>Confirmed</th>
	                <th>Active</th>
	                <th>Recovered</th>
	                <th>Deceased</th>
	                <th>Tested</th>
	                <th>Population</th>
	            </tr>
	        </thead>
	        <tbody>
	        	{% for state, data in state_list.items %}
	        	{% if not "Total_Testing" == state %}
		        	<tr>
		        		<td><a href="/{{ data.code }}/">{{ state }}</a></td>
		        		<td>{{ data.total.confirmed|intcomma_indian|default:0 }}</td>
		        		<td>{{ data.total.confirmed|sub:data.total.recovered }}</td>
		        		<td>{{ data.total.recovered|intcomma_indian|default:0 }}</td>
		        		<td>{{ data.total.deceased|intcomma_indian|default:0 }}</td>
		        		<td>{{ data.total.tested|intcomma_indian|default:0 }}</td>
		        		<td>{{ data.meta.population|floatword_indian|default:0 }}</td>
		        	</tr>
	        	{% endif %}
	        	{% endfor %}
	        </tbody>
	</table>
</div>

{% include 'home/index-chart.html' %}

{% endblock content %}

{% block script %}
	<script type="text/javascript">
		$(document).ready(function() {
		    $('#example').DataTable({
		    	"paging":   false,
		    	"info":     false,
		    });
		} );
	</script>

	<script type="text/javascript">
		$('.Count').each(function () {
		    $(this).prop('Counter',0).animate({
		        Counter: $(this).text()
		    }, {
		        duration: 3000,
		        easing: 'swing',
		        step: function (now) {
		            $(this).text(Math.ceil(now).toLocaleString('en-IN'));
		        }
		    });
		});
	</script>

	<script type="text/javascript">

		var ctxD = document.getElementById("doughnutChart").getContext('2d');
		var confirmed = [], deceased = [], recovered = [], others = [], tested = [];
		var clabel = [];

		var myLineChart = new Chart(ctxD, {
			type: 'line',
			data: {
			labels: {{ confirmed }},
			datasets: [{
				label: "confirmed",
				borderColor: "red",
				data: {{ confirmed }},
			},
			{
				label: "deceased",
				borderColor: "grey",
				data: {{ deceased }},
			},
			{
				label: "recovered",
				borderColor: "green",
				data: {{recovered}},
			},
			// {
			// 	label: "others",
			// 	borderColor: "yellow",
			// 	data: {{others}},
			// },
			{
				label: "tested",
				borderColor: "orange",
				data: {{tested}},
			}
		]
	},
			options: {
				responsive: true,
				
		}
	});
		console.log(confirmed, clabel);
	</script>
{% endblock script %}